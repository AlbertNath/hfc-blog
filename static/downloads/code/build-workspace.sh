#!/bin/bash

LOGO="
*************=+++*+=********+*+****======*******************
*************************=*=***+              ..   *+:******
****=************************************+-       **  +*****
******+********:=**** **+=**** =****************=======*****
****=********+ +***** **********-  +******=.****=======*****
****************- +*  +************:**: .:. +***=======*****
*****************:*.  =********    +************=======*****
**=+******************+****************    =****=======*****
**++**************-    *******.*****************=======*****
**++*********** ***   ********:- **.***.********=======*****
**************** =*   ***+**** +*      **: *+***=====*+*****
**=+***=**********+   ********  ****+ ++++* +***===-**:*****
***: .********** =**-*=*******   ***  +***: +***==****=*****
*** =********* =****=*+**=*****+: **  ***=  +***=***+==*****
***********++*    **-****=**************    +******====*****
**********+*-=**= *+=*=**-***==+*****************+=====*****
***********======**+=*+*****+***+=-=====*******+======******
*************+====*+***:****           :-***++======********
*************======+********-.*.             ****  *********
*************=======+* *****-+:  *         -******.*********
*************+==+*===** **.==.-===. *      *:-.:+ **********
***************+*+*==-***+==-+==+==.* .*.  : :+*** *********
********************==***=======++++ -==****-+**-  *********
********************+***= *-=*==+*=*+***********************
*************************  *=*******************************"

# Ansi Colors

GREEN='\033[38;2;78;238;133m'
BLUE="\033[38;2;100;149;237m"
RED="\033[38;2;255;85;85m"
YELLOW="\033[38;2;255;215;0m"
GRAY="\033[38;2;176;179;184m"
RESET='\033[0m'

info() {
  echo -e "${GRAY}[!] $1${RESET}"
}

success() {
  echo -e "${GREEN}[✔] $1${RESET}"
}

warn() {
  echo -e "${YELLOW}[⚠] $1${RESET}"
}

error() {
  echo -e "${RED}[✘] $1${RESET}"
}

generate_header() {
  TITLE="$1"
  DATE=$(date --iso-8601=seconds | sed 's/ /T/' | sed -E 's/([+-][0-9]{2})([0-9]{2})$/\1:\2/')
  echo "+++
title = \"${TITLE}\"
date = \"${DATE}\"
author = \"\"
authors = [\"\"]
tags = [\"\",]
showFullContent = false
hideComments = true 
+++"
}

main() {
  if [[ -z "$1" ]]; then
    error "Se requiere un nombre para la entrada en el espacio de trabajo... abortando"
    exit 1
  fi

  echo -e "${GREEN}$LOGO${RESET}"
  info "Creando espacio de trabajo..."
  mkdir -p hfc-blog-request/content/posts/ hfc-blog-request/static/img/"$1"/
  success "OK!"

  info "Creando elementos..."
  touch hfc-blog-request/content/posts/"$1".md
  generate_header "$1" >hfc-blog-request/content/posts/"$1".md
  success "OK!"
}

main "$@"
